<?php require_once("admin/model/sms/main.php"); require_once("admin/model/sms/sms.php"); class ControllerSmsDelivery extends Controller { private $v30254b58e73f393933cfc41c9be1518697620460; public function index() { $this->v30254b58e73f393933cfc41c9be1518697620460 = new ModelSmsMain($this->registry); $if2d170e6531e7181e7b1fb607ba33f54727b5510 = filter_input(INPUT_GET, "test"); if(isset($if2d170e6531e7181e7b1fb607ba33f54727b5510) && $if2d170e6531e7181e7b1fb607ba33f54727b5510 == 1) { echo "CARTSMS123"; } else { $this->updateDR(); } } public function updateDR() { $ifc151825ac364e60fe8d87c264c6de076010ccfe = 0; $ib2bdeb39d0b431e06e364d808d2f32fddee67ca3 = ''; switch(filter_input(INPUT_GET, 'status')) { case 1: $ifc151825ac364e60fe8d87c264c6de076010ccfe = SmsModel::STATUS_DELIVERED; break; case 2: $ifc151825ac364e60fe8d87c264c6de076010ccfe = SmsModel::STATUS_BUFFERED; $ib2bdeb39d0b431e06e364d808d2f32fddee67ca3 = ", note='waiting in SMS centre for delivery to the recipient'"; break; case 3: if(strpos(strtoupper(trim(urldecode(filter_input(INPUT_GET, "message")))), 'NDNC') !== false) { $ifc151825ac364e60fe8d87c264c6de076010ccfe = SmsModel::STATUS_DND; } elseif(strpos(strtolower(trim(urldecode(filter_input(INPUT_GET, "message")))), 'message duplicity') !== false) { $ifc151825ac364e60fe8d87c264c6de076010ccfe = SmsModel::STATUS_DUPLICATE; } else { $ifc151825ac364e60fe8d87c264c6de076010ccfe = SmsModel::STATUS_ERROR; } $ib2bdeb39d0b431e06e364d808d2f32fddee67ca3 = filter_input(INPUT_GET, "message"); break; case 5: $ifc151825ac364e60fe8d87c264c6de076010ccfe = SmsModel::STATUS_ERROR; break; case 10: $ifc151825ac364e60fe8d87c264c6de076010ccfe = 10; break; } if($ifc151825ac364e60fe8d87c264c6de076010ccfe == 10) { $ifbf4aaa2b8f71b53772a21d364316207d342bcd5 = explode(";", filter_input(INPUT_GET, 'smsdetails')); $i44f2d8726b0116c87e3c84c8ed1b49f3c55ac5d9 = $ifbf4aaa2b8f71b53772a21d364316207d342bcd5[0]; $this->v30254b58e73f393933cfc41c9be1518697620460->Execute("INSERT INTO ".DB_PREFIX."sp_answers VALUES (null, '".$this->v30254b58e73f393933cfc41c9be1518697620460->escape(filter_input(INPUT_GET, 'message'))."', '".$this->v30254b58e73f393933cfc41c9be1518697620460->escape(filter_input(INPUT_GET, 'from'))."','0','".$this->v30254b58e73f393933cfc41c9be1518697620460->escape($i44f2d8726b0116c87e3c84c8ed1b49f3c55ac5d9)."',NOW())"); } elseif($ifc151825ac364e60fe8d87c264c6de076010ccfe > 0 && strlen(filter_input(INPUT_GET, 'smsID')) > 0) { $this->v30254b58e73f393933cfc41c9be1518697620460->Execute("UPDATE ".DB_PREFIX."sp_sms_history SET status='".$this->v30254b58e73f393933cfc41c9be1518697620460->escape($ifc151825ac364e60fe8d87c264c6de076010ccfe). "', note='".$this->v30254b58e73f393933cfc41c9be1518697620460->escape($ib2bdeb39d0b431e06e364d808d2f32fddee67ca3)."', price = ".$this->v30254b58e73f393933cfc41c9be1518697620460->escape(filter_input(INPUT_GET, 'price')).", `change` = 1 WHERE smsID like '%".$this->v30254b58e73f393933cfc41c9be1518697620460->escape(filter_input(INPUT_GET, 'smsID'))."%'"); } return true; } } 