<?php error_reporting(0); define("SMS_CONTROLER_URL", DIR_APPLICATION . 'model/sms/'); require_once (defined("SMS_CONTROLER_URL")?SMS_CONTROLER_URL:"") .'smsController.php'; require_once (defined("SMS_CONTROLER_URL")?SMS_CONTROLER_URL:"") .'filter.php'; define("MAX_ON_ROW", 10); class ControllerSmsMarketing extends SmsController { public $marketingFilter; private $v107a4aaa4ac26b49ac98503da261695f838538b6 = 0; private $v6c08bf61f437a7df1241311fb1b61cb26dfddd64 = false; private $vb60aacf907e26fcd4e5091fb981d81cb096eec61 = true; private $v09c290fe517fd15652b5755e9d3cd559511cc2b0 = false; private $vd5dcee56d6ff5b91e8c1fb08d5fcf7300b3d459e; private $ve32585eb1b56e8e02465722681ae17f4122f4b7d = ""; private $vef17e27247517454a75465a52fbd4658dd7ef33f = 0; public $timezone = "Europe/Prague"; private $vb6f774529990c621c8a975bde1323be12d8d4de5 = ""; private $v7b1b3e77eefbf52b5d92b0b9f74c61751fe15cc5 = -1; public function index() { if(!self::getSession($this, "filter", false)) { self::setSession($this, "filter", null); } if(!self::getSession($this, "disableCustomer", false)) { self::setSession($this, "disableCustomer", array()); } define("SMS_FILTER_ON", true); if(!self::getSession($this, "disableCustomerCount", false)) { self::setSession($this, "disableCustomerCount", 0); } $this->setAjaxPostAction("smsCounter();"); parent::index(); } public function ajaxFilters($ib1199182837e705aae8d93f525c88b1184f9395d) { $this->disableScrollUp(); $i0243e53ef7f9b246d17b017e0fa0107f5ca9cf17elected = $this->marketingFilter->getFilterValues($ib1199182837e705aae8d93f525c88b1184f9395d["actionVal"]); switch($i0243e53ef7f9b246d17b017e0fa0107f5ca9cf17elected->type) { case "select": $i29b87480599173ab88a098b990462dfd09e9bcb0 = self::getSelect(array("name" => "value"), $i0243e53ef7f9b246d17b017e0fa0107f5ca9cf17elected->data); break; case "input": $i29b87480599173ab88a098b990462dfd09e9bcb0 = self::getInput(array("name" => "value", "type" => "text")); break; case "datetime": $i29b87480599173ab88a098b990462dfd09e9bcb0 = self::getInput(array("name" => "value", "class" => "datetimepicker", "type" => "text")) . v_smsmarketing_birthto . self::getInput(array("name" => "value1", "class" => "datetimepicker", "type" => "text")); break; case "relationValue": $i29b87480599173ab88a098b990462dfd09e9bcb0 = self::getSelect(array("name" => "value", "type" => "text"), array(0 => "<", 1 => ">", 2 => "=", 3 => "≠")) . self::getInput(array("name" => "value1", "type" => "text"));; break; case "allYearsDate": $i29b87480599173ab88a098b990462dfd09e9bcb0 = v_statistics_day.": ".self::getSelect(array("name" => "value"), $this->generateNumbers(1, 31))." ".v_smshistory_month.": ".self::getSelect(array("name" => "value1"), $this->generateNumbers(1, 12)); break; } if(defined("SMS_CLOSE_SYMBOL")) { $i29b87480599173ab88a098b990462dfd09e9bcb0 = preg_replace('/[\x00-\x1F\x80-\xFF]/', '', $i29b87480599173ab88a098b990462dfd09e9bcb0); } $this->sendSnippet("filtervalue", $i29b87480599173ab88a098b990462dfd09e9bcb0); } public function ajaxClearFilter() { $this->marketingFilter->clearFilter(); $this->sendSnippet("filters", ""); self::setSession($this, "disableCustomer", array()); self::setSession($this, "disableCustomerCount", 0); $this->_okMsg[] = v_filter_been_clear; $this->invalidateSnippets(); } public function ajaxDeleteFilter($ib1199182837e705aae8d93f525c88b1184f9395d) { $this->marketingFilter->deleteActiveFilter($ib1199182837e705aae8d93f525c88b1184f9395d["idFilter"], $ib1199182837e705aae8d93f525c88b1184f9395d["indexFilter"]); $this->sendSnippet("filters", $this->marketingFilter->getFilterItems()); $this->invalidateSnippets(); } public function ajaxSubmitMarketingFilter($ib1199182837e705aae8d93f525c88b1184f9395d) { $this->sendSnippet("filters", $this->marketingFilter->getFilterItems()); $this->invalidateSnippets(); } public function ajaxShowCustomers($ib1199182837e705aae8d93f525c88b1184f9395d) { $this->disableScrollUp(); $ic4324c4544b80dfa783ca4be081d513146b855f5 = $this->ff1d5bbecbb186cea83f5f59177713da3c0b6fdd5(); $this->sendSnippet("popupcontent", $this->f4a4987eafe5675dfad72cd463c38035aabb708b5($ic4324c4544b80dfa783ca4be081d513146b855f5[$ib1199182837e705aae8d93f525c88b1184f9395d["letter"]], $ib1199182837e705aae8d93f525c88b1184f9395d["letter"])); $this->sendSnippet("popuphead", "<img src=\"" . self::$adminCustomerImg . "\" /> " . strtoupper($ib1199182837e705aae8d93f525c88b1184f9395d["letter"]) . " - " . v_smsmarketing_customersfound . " " . count($ic4324c4544b80dfa783ca4be081d513146b855f5[$ib1199182837e705aae8d93f525c88b1184f9395d["letter"]])); } public function ajaxDeleteCustomer($ib1199182837e705aae8d93f525c88b1184f9395d) { $id960ddd9e843150fe4875c48e896395edac7ca1df57d691362ea0a39d7674491c4949cdbc3d5039d = $this->findCustomer($ib1199182837e705aae8d93f525c88b1184f9395d["customer"]); if($id960ddd9e843150fe4875c48e896395edac7ca1df57d691362ea0a39d7674491c4949cdbc3d5039d == false) { $i305b86d048336a48f93e43d42ec9ee42de8d4974 = self::getSession($this, "disableCustomer", array()); $i305b86d048336a48f93e43d42ec9ee42de8d4974[mb_substr(strtolower(trim($ib1199182837e705aae8d93f525c88b1184f9395d["lastname"])), 0, 1, "UTF-8")][] = array("customer_id" => $ib1199182837e705aae8d93f525c88b1184f9395d["customer"], "firstname" => $ib1199182837e705aae8d93f525c88b1184f9395d["firstname"], "lastname" => $ib1199182837e705aae8d93f525c88b1184f9395d["lastname"]); self::setSession($this, "disableCustomer", $i305b86d048336a48f93e43d42ec9ee42de8d4974); self::incSession($this, "disableCustomerCount"); } else { self::incSession($this, "disableCustomerCount", -1); $i305b86d048336a48f93e43d42ec9ee42de8d4974 = self::getSession($this, "disableCustomer", array()); unset($i305b86d048336a48f93e43d42ec9ee42de8d4974[$id960ddd9e843150fe4875c48e896395edac7ca1df57d691362ea0a39d7674491c4949cdbc3d5039d["letter"]][$id960ddd9e843150fe4875c48e896395edac7ca1df57d691362ea0a39d7674491c4949cdbc3d5039d["key"]]); if(count($i305b86d048336a48f93e43d42ec9ee42de8d4974[$id960ddd9e843150fe4875c48e896395edac7ca1df57d691362ea0a39d7674491c4949cdbc3d5039d["letter"]]) == 0) { unset($i305b86d048336a48f93e43d42ec9ee42de8d4974[$id960ddd9e843150fe4875c48e896395edac7ca1df57d691362ea0a39d7674491c4949cdbc3d5039d["letter"]]); } self::setSession($this, "disableCustomer", $i305b86d048336a48f93e43d42ec9ee42de8d4974); } if(isset($ib1199182837e705aae8d93f525c88b1184f9395d["letter"])) { $ic4324c4544b80dfa783ca4be081d513146b855f5 = $this->ff1d5bbecbb186cea83f5f59177713da3c0b6fdd5(); $this->sendSnippet("popupcontent", $this->f4a4987eafe5675dfad72cd463c38035aabb708b5($ic4324c4544b80dfa783ca4be081d513146b855f5[$ib1199182837e705aae8d93f525c88b1184f9395d["letter"]], $ib1199182837e705aae8d93f525c88b1184f9395d["letter"])); $this->sendSnippet("popuphead", "<img src=\"" . self::$adminCustomerImg . "\" /> " . strtolower($ib1199182837e705aae8d93f525c88b1184f9395d["letter"]) . " - " . v_smsmarketing_customersfound . " " . count($ic4324c4544b80dfa783ca4be081d513146b855f5[$ib1199182837e705aae8d93f525c88b1184f9395d["letter"]])); } $this->invalidateSnippets(); } public function ajaxSaveFilter() { $this->disableScrollUp(); $this->sendSnippet("popuphead", v_filter_save); $this->sendSnippet("popupcontent", $this->f77bd7f78f7f71eb1e1816b1fa79cb6da75def35a()); } public function ajaxLoadFilter() { $this->disableScrollUp(); $this->sendSnippet("popuphead", v_filter_load); $this->sendSnippet("popupcontent", $this->f77bd7f78f7f71eb1e1816b1fa79cb6da75def35a(false)); } public function ajaxRestoreFilter($ib1199182837e705aae8d93f525c88b1184f9395d) { $id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe = $this->Execute("SELECT * FROM `" . DB_PREFIX . "sp_marketing_filter` WHERE `id` = '" . $this->escape($ib1199182837e705aae8d93f525c88b1184f9395d["filter"]) . "'"); if($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->num_rows) { foreach($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->rows as $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d) { $iff4d7a22830d73b83e55a907cf2b7c446e53db32 = self::getSession($this, "filter", null); if(!is_a($iff4d7a22830d73b83e55a907cf2b7c446e53db32, "activeFilter")) { $iff4d7a22830d73b83e55a907cf2b7c446e53db32 = new activeFilter($this->marketingFilter); } $i45de34ca7ff6ea45eca54a7d7ac0d728d8c32396 = unserialize($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["filter"]); $iff4d7a22830d73b83e55a907cf2b7c446e53db32->setData($i45de34ca7ff6ea45eca54a7d7ac0d728d8c32396->data); self::setSession($this, "filter", $iff4d7a22830d73b83e55a907cf2b7c446e53db32); self::setSession($this, "disableCustomer", unserialize($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["disabled"])); self::setSession($this, "disableCustomerCount", $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["disabled_counter"]); } } $this->sendSnippet("filters", $this->marketingFilter->getFilterItems()); $this->_okMsg[] = v_filter_been_apply; $this->invalidateSnippets(); } public function ajaxDeleteSaveFilter($ib1199182837e705aae8d93f525c88b1184f9395d) { $this->disableScrollUp(); $this->Execute("DELETE FROM `" . DB_PREFIX . "sp_marketing_filter` WHERE `id` = '" . $this->escape($ib1199182837e705aae8d93f525c88b1184f9395d["filter"]) . "'"); $this->sendSnippet("popupcontent", $this->f77bd7f78f7f71eb1e1816b1fa79cb6da75def35a(false)); } public function ajaxSaveTemplate() { $this->disableScrollUp(); $this->sendSnippet("popuphead", v_template_save); $this->sendSnippet("popupcontent", $this->f48f200fa72d1635ad27c2880942a5195aa5f3cb1()); } public function ajaxLoadTemplate() { $this->disableScrollUp(); $this->sendSnippet("popuphead", v_template_load); $this->sendSnippet("popupcontent", $this->f48f200fa72d1635ad27c2880942a5195aa5f3cb1(false)); } public function ajaxDeleteSaveTemplate($ib1199182837e705aae8d93f525c88b1184f9395d) { $this->disableScrollUp(); $this->Execute("DELETE FROM `" . DB_PREFIX . "sp_template` WHERE `id` = '" . $this->escape($ib1199182837e705aae8d93f525c88b1184f9395d["template"]) . "'"); $this->sendSnippet("popupcontent", $this->f48f200fa72d1635ad27c2880942a5195aa5f3cb1(false)); } public function ajaxRestoreTemplate($ib1199182837e705aae8d93f525c88b1184f9395d) { $id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe = $this->Execute("SELECT * FROM `" . DB_PREFIX . "sp_template` WHERE `id` = '" . $this->escape($ib1199182837e705aae8d93f525c88b1184f9395d["template"]) . "'"); if($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->num_rows) { $this->sendSnippet("textarea", self::getTextArea(array("name" => "text", "onchange" => "smsCounter()", "onkeyup" => "smsCounter()", "rows" => 12, "cols" => 60, "class" => "left", "id" => "smsText"), $id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->row["template"])); $this->sendSnippet("unicode", self::getInput(array("type" => "checkbox", "onchange" => "smsCounter()", "id" => "unicode", "name" => "unicode", "value" => 1), $id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->row["unicode"]) . ' ' . v_smsmarketing_unicode . ' ' . self::getHint(v_smsmarketing_unicodetext)); $this->sendSnippet("unique", self::getInput(array("type" => "checkbox", "id" => "unique", "name" => "unique", "value" => 1), $id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->row["unique"]) . ' ' . v_remove_duplicate); $this->_okMsg[] = v_template_been_apply; } } public function findCustomer($ib98fd50f1e7be0a00455cac1d85dbcc66198daa3) { $i1c7843c56e2bd834bf240c91c0d14ad87e1ba7e7 = self::getSession($this, "disableCustomer", array()); foreach($i1c7843c56e2bd834bf240c91c0d14ad87e1ba7e7 as $id960ddd9e843150fe4875c48e896395edac7ca1d1cea9379183f00fe76b83333d1cd6e0b1759b637 => $id960ddd9e843150fe4875c48e896395edac7ca1d24559340659e3654ee9c4f36d94523f268e83b49) { foreach($id960ddd9e843150fe4875c48e896395edac7ca1d24559340659e3654ee9c4f36d94523f268e83b49 as $id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695 => $id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69) { if($id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69["customer_id"] == $ib98fd50f1e7be0a00455cac1d85dbcc66198daa3) { return array("letter" => $id960ddd9e843150fe4875c48e896395edac7ca1d1cea9379183f00fe76b83333d1cd6e0b1759b637, "key" => $id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695); } } } return false; } public function invalidateSnippets() { $this->disableScrollUp(); $ic4324c4544b80dfa783ca4be081d513146b855f5 = $this->ff1d5bbecbb186cea83f5f59177713da3c0b6fdd5(); $this->sendSnippet("customers", $this->fe54c016d0b5b394178312b2e18407a6677222897($ic4324c4544b80dfa783ca4be081d513146b855f5)); $this->sendSnippet("countup", $this->vef17e27247517454a75465a52fbd4658dd7ef33f); $this->sendSnippet("countdown", $this->vef17e27247517454a75465a52fbd4658dd7ef33f); $this->sendSnippet("disableCounter", self::getSession($this, "disableCustomerCount", 0)); $this->sendSnippet("disabledcustomers", $this->fe54c016d0b5b394178312b2e18407a6677222897(self::getSession($this, "disableCustomer", array()), "#990000", false)); } public function display() { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee = parent::display(); $i107a4aaa4ac26b49ac98503da261695f838538b6 = $this->getTimezoneSettings(); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= $this->getTemplateRepalce(); $ic4324c4544b80dfa783ca4be081d513146b855f5 = $this->ff1d5bbecbb186cea83f5f59177713da3c0b6fdd5(); $ie8bf65cd40f70005ebeae2be139a406353b7a989 = $this->getCoupons(); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= ' <script type="text/javascript"> var imgPath = "' . DIR_SMS_IMG . '"; var v_smsmarketing_longtext = "' . v_smsmarketing_longtext . '"; var v_smsmarketing_jstotalcustomers = "' . v_smsmarketing_jstotalcustomers . '"; var v_smsmarketing_jstotalsms = "' . v_smsmarketing_jstotalsms . '"; var v_smsmarketing_jschars = "' . v_smsmarketing_jschars . '"; var v_smsanswers_sms = "' . v_smsanswers_sms . '"; </script> '; $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= '<script type="text/javascript" src="' . DIR_SMS_JS . 'sms.js"></script>'; $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= '<script type="text/javascript" src="' . DIR_SMS_JS . 'jquery.at.caret.min.js"></script>'; $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= Html::header(v_smsmarketing_smsmarketingfound . Html::snippet("countup", $this->vef17e27247517454a75465a52fbd4658dd7ef33f), 2) . Html::p(v_smsmarketing_description); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= ' <fieldset> ' . Html::legend(Html::img(array("src" => self::$setingsImg)) . " " . v_smsmarketing_smsbulk . "<span class=\"right\"><a href=\"" .$this->smsLinkSaveMarketingTemplate(). "\" class=\"ajax\" onclick=\"showPopup();\">[" . v_template_save . "]</a> <a href=\"".$this->smsLinkSavedMarketingTemplate()."\" class=\"ajax\" onclick=\"showPopup();\">[" . v_template_load . "]</a></span>") . ' <form name="formSMS" action="" method="post"> <table class="formTableSend"> <tbody> <tr> <td>' . v_smsmarketing_entertext . ':</td> <td>' . v_adminsms_preview . ': <span id="labelSMS" class="note s12 right"></span></td> <td></td> </tr> <tr> <td rowspan=4 class="sendTextArea" id="snippet-textarea">' . self::getTextArea(array("name" => "text", "onchange" => "smsCounter()", "onkeyup" => "smsCounter()", "rows" => 12, "cols" => 60, "class" => "left", "id" => "smsText"), $this->ve32585eb1b56e8e02465722681ae17f4122f4b7d) . '</td> <td rowspan=4 class="sendTextArea">' . self::getTextArea(array("name" => "preview", "rows" => 12, "cols" => 60, "class" => "left", "id" => "smsPreview", "disabled" => "disabled")) . '</td> <td id="snippet-unicode">' . self::getInput(array("type" => "checkbox", "onchange" => "smsCounter()", "id" => "unicode", "name" => "unicode", "value" => 1), $this->v6c08bf61f437a7df1241311fb1b61cb26dfddd64) . ' ' . v_smsmarketing_unicode . ' ' . self::getHint(v_smsmarketing_unicodetext) . '</td> </tr> <tr> <td id="snippet-unique">' . self::getInput(array("type" => "checkbox", "id" => "unique", "name" => "unique", "value" => 1), $this->vb60aacf907e26fcd4e5091fb981d81cb096eec61) . ' ' . v_remove_duplicate . '</td> </tr> <tr> <td>' . self::getInput(array("type" => "checkbox", "id" => "sendlater", "name" => "sendlater", "value" => 1, "onclick" => "jQuery('.sendLater').toggleClass('invisibility');"), $this->v09c290fe517fd15652b5755e9d3cd559511cc2b0) . ' ' . v_smsmarketing_sendlater . '</td> </tr> <tr> <td> <table class="sendLater ' . (($this->v09c290fe517fd15652b5755e9d3cd559511cc2b0 == 1) ? ("") : ("invisibility")) . '"> <tr> <td>' . v_smsmarketing_date . '</td> <td>' . self::getInput(array("type" => "text", "id" => "datetimepicker", "class" => "datetime", "name" => "laterdate")) . '</td> </tr> <tr> <td>' . v_smsmarketing_yourtime . '</td> <td>' . self::getSelect(array("name" => "datereal"), array(-1 => $i107a4aaa4ac26b49ac98503da261695f838538b6 . " -" . v_smsmarketing_hr, 0 => $i107a4aaa4ac26b49ac98503da261695f838538b6, 1 => $i107a4aaa4ac26b49ac98503da261695f838538b6 . " +" . v_smsmarketing_hr), $this->v107a4aaa4ac26b49ac98503da261695f838538b6) . '</td> </tr> <tr> <td></td> <td>(' . v_smsmarketing_timezone . '<a href="' . $this->smsLinkTimezone() . '">' . $this->timezone . '</a>)</td> </tr> </table> </td> </tr> <tr> <td colspan="2"><p>' . v_smsprestashop_notice . '<p/> <p>' . $this->getTags(self::$MarketingTemplateCustomers) . "<br/>" . $this->getTags(self::$MarketingTemplateShop) . '<p/> ' . $this->getCouponForm($ie8bf65cd40f70005ebeae2be139a406353b7a989, $this->v7b1b3e77eefbf52b5d92b0b9f74c61751fe15cc5) . ' </td> <td class="bottom">' . self::getInput(array("type" => "submit", "name" => "submitSend", "value" => v_smsmarketing_send, "class" => "button", "onclick" => "return confirmSend('" . v_smsmarketing_send . "', '" . v_smsanswers_sms . "');")) . '</td> </tr> </tbody> </table> </form> </fieldset> '; $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= ' <fieldset> <legend><img src="' . self::$setingsImg . '" alt="' . v_smsmarketing_bulkfilter . '" /> ' . v_smsmarketing_bulkfilter . ' <span class="right"> <a href="'.$this->smsLinkClearFilter().'" class="ajax" data-confirm="' . v_filter_q_clear . '">[' . v_filter_clear . ']</a> <a href="'.$this->smsLinkSaveFilter(). '" class="ajax" onclick="showPopup();">[' . v_filter_save . ']</a> <a href="'.$this->smsLinkLoadFilter(). '" class="ajax" onclick="showPopup();">[' . v_filter_load . ']</a> </span> </legend> <p id="snippet-filters">' . $this->marketingFilter->getFilterItems() . '</p> <form name="filterSms" action="" method="post" class="ajax hoverForm"> <table> <tr> <td class="w220">' . self::getSelect(array("name" => "filters", "id" => "filters", "onchange" => "sendAjax('filters', '" .$this->smsLinkAddFilter(). "')"), $this->marketingFilter->getFilters()) . '</td> <td class="mw20"><span id="snippet-filtervalue"></span></td> <td> ' . self::getInput(array("name" => "submitMarketingFilter", "type" => "submit", "value" => v_smsmarketing_applyfilter)) . ' </td> </tr> </table> </form> </fieldset> '; $id960ddd9e843150fe4875c48e896395edac7ca1dcae1003a7b78317ecd106d559490d2ed7842f019f0feb50adf373c822f952dbf828d39459fabee4 = $this->getStore(false); $i0986dd3fc27f6ba8df0dcf77938b4980c774a563 = ""; if(isset($id960ddd9e843150fe4875c48e896395edac7ca1dcae1003a7b78317ecd106d559490d2ed7842f019f0feb50adf373c822f952dbf828d39459fabee4) && count($id960ddd9e843150fe4875c48e896395edac7ca1dcae1003a7b78317ecd106d559490d2ed7842f019f0feb50adf373c822f952dbf828d39459fabee4) > 1) { foreach($id960ddd9e843150fe4875c48e896395edac7ca1dcae1003a7b78317ecd106d559490d2ed7842f019f0feb50adf373c822f952dbf828d39459fabee4 as $id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695 => $id960ddd9e843150fe4875c48e896395edac7ca1dbd0578718e12a692b299a588249092e07aac601e) { $i0986dd3fc27f6ba8df0dcf77938b4980c774a563 .= " <span class=\"badge\" style=\"background-color:" . self::$colors[$id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695%9] . ";\">" . htmlspecialchars($id960ddd9e843150fe4875c48e896395edac7ca1dbd0578718e12a692b299a588249092e07aac601e) . "</span>"; } } $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .=' <fieldset> <legend><img src="' . self::$catalogImg . '" alt="" /> ' . v_smsmarketing_customersfound . '<span id="snippet-countdown">' . $this->vef17e27247517454a75465a52fbd4658dd7ef33f . '</span><span class="right">' . $i0986dd3fc27f6ba8df0dcf77938b4980c774a563 . '</span></legend> <div id="snippet-customers">' . $this->fe54c016d0b5b394178312b2e18407a6677222897($ic4324c4544b80dfa783ca4be081d513146b855f5) . '</div> </fieldset>'; $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .=' <fieldset> <legend><img src="' . self::$catalogImg . '" alt="" /> ' . v_filter_deleted_customers . '<span id="snippet-disableCounter">' . self::getSession($this, "disableCustomerCount", array()) . '</span></legend> <div id="snippet-disabledcustomers">' . $this->fe54c016d0b5b394178312b2e18407a6677222897(self::getSession($this, "disableCustomer", array()), "#990000", false).'</div> </fieldset>'; $id960ddd9e843150fe4875c48e896395edac7ca1d1548a96b3354c4b6d80c8278133fdb971c700757 = new DateTime($this->vd5dcee56d6ff5b91e8c1fb08d5fcf7300b3d459e); $id960ddd9e843150fe4875c48e896395edac7ca1d1548a96b3354c4b6d80c8278133fdb971c700757->setTimezone(new DateTimeZone($this->timezone)); if(defined("SMS_CLOSE_SYMBOL")) { $id960ddd9e843150fe4875c48e896395edac7ca1d3a4e4a581e6eb512a29a89e5579c91af2599272c = SMS_CLOSE_SYMBOL; } else { $id960ddd9e843150fe4875c48e896395edac7ca1d3a4e4a581e6eb512a29a89e5579c91af2599272c = "×"; } $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= '<div id="popup">' . '<p class="popuphead"><span id="snippet-popuphead"></span><span class="close right" onclick="showPopup();">'.$id960ddd9e843150fe4875c48e896395edac7ca1d3a4e4a581e6eb512a29a89e5579c91af2599272c.'</span></p>' . '<div class="popupcontent"><p id="snippet-popupcontent"></p></div></div>'; $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= '<div id="popupbackground"></div>'; $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= self::getAjaxLoader("submitSend", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= self::getAjaxLoader("submitMarketingFilter", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= self::getAjaxLoader("deleteFilter", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= self::getAjaxLoader("deleteCustomer", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= self::getAjaxLoader("clearFilter", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= " <script type=\"text/javascript\"> jQuery('#datetimepicker').datetimepicker({ lang:'" . lang_iso_code . "', value:'" . $id960ddd9e843150fe4875c48e896395edac7ca1d1548a96b3354c4b6d80c8278133fdb971c700757->format("Y-m-d H:i") . "' }); smsCounter(); toggleCouponVariables(); </script> "; return $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee; } public function postProcess($if7ac7ffb0e11bffa95681698138e923b4fd51990 = NULL, $i120dfeb2f4db76e8e52ed01ad8e678e2b9fa3bb9 = NULL, $i4df8c509b6936a0640c1594ca9b38a0a55a9562f = NULL) { if($if7ac7ffb0e11bffa95681698138e923b4fd51990 == NULL && $i120dfeb2f4db76e8e52ed01ad8e678e2b9fa3bb9 == NULL) { return self::POST_ERROR; } if(isset($if7ac7ffb0e11bffa95681698138e923b4fd51990["submitMarketingFilter"])) { $if7ac7ffb0e11bffa95681698138e923b4fd51990 = $this->escapeInput($if7ac7ffb0e11bffa95681698138e923b4fd51990); $i0243e53ef7f9b246d17b017e0fa0107f5ca9cf17 = $this->escapePostVariables("filters", null); $id960ddd9e843150fe4875c48e896395edac7ca1dbd0578718e12a692b299a588249092e07aac601e = $this->escape(filter_input(INPUT_POST, "value")); $id960ddd9e843150fe4875c48e896395edac7ca1df68b432fb69e6c0b4b65ec8aa43a054935cd3d58 = $this->escape(filter_input(INPUT_POST, "value1")); if($id960ddd9e843150fe4875c48e896395edac7ca1dbd0578718e12a692b299a588249092e07aac601e == -1) { return self::POST_ERROR; } if($id960ddd9e843150fe4875c48e896395edac7ca1df68b432fb69e6c0b4b65ec8aa43a054935cd3d58 != null) { $id960ddd9e843150fe4875c48e896395edac7ca1dbd0578718e12a692b299a588249092e07aac601e = array(0 => $id960ddd9e843150fe4875c48e896395edac7ca1dbd0578718e12a692b299a588249092e07aac601e, 1 => $id960ddd9e843150fe4875c48e896395edac7ca1df68b432fb69e6c0b4b65ec8aa43a054935cd3d58); } $this->marketingFilter->selectedFilterAdd($i0243e53ef7f9b246d17b017e0fa0107f5ca9cf17, $id960ddd9e843150fe4875c48e896395edac7ca1dbd0578718e12a692b299a588249092e07aac601e); return self::POST_OK; } elseif(isset($if7ac7ffb0e11bffa95681698138e923b4fd51990["submitSend"])) { $this->v6c08bf61f437a7df1241311fb1b61cb26dfddd64 = $this->escapePostVariables("unicode"); $this->vb60aacf907e26fcd4e5091fb981d81cb096eec61 = $this->escapePostVariables("unique"); $this->v09c290fe517fd15652b5755e9d3cd559511cc2b0 = $this->escapePostVariables("sendlater"); $this->vd5dcee56d6ff5b91e8c1fb08d5fcf7300b3d459e = $this->escapePostVariables("laterdate"); $this->ve32585eb1b56e8e02465722681ae17f4122f4b7d = $this->escapePostVariables("text"); $this->v107a4aaa4ac26b49ac98503da261695f838538b6 = $this->escapePostVariables("datereal"); $this->v7b1b3e77eefbf52b5d92b0b9f74c61751fe15cc5 = $this->escapePostVariables("coupon"); $id960ddd9e843150fe4875c48e896395edac7ca1df9d70e6263a5374064533b7bc8485f2b3ec26e22 = $this->ff1d5bbecbb186cea83f5f59177713da3c0b6fdd5(); if($this->v7b1b3e77eefbf52b5d92b0b9f74c61751fe15cc5 != -1) { $this->ve32585eb1b56e8e02465722681ae17f4122f4b7d = $this->applyTemplate($this->getCouponData($this->v7b1b3e77eefbf52b5d92b0b9f74c61751fe15cc5), $this->ve32585eb1b56e8e02465722681ae17f4122f4b7d, self::$MarketingTemplateCoupons); } $id960ddd9e843150fe4875c48e896395edac7ca1df9d70e6263a5374064533b7bc8485f2b3ec26e22 = $this->f9786bea23184d77afb22376874f78b5e81992b7d($id960ddd9e843150fe4875c48e896395edac7ca1df9d70e6263a5374064533b7bc8485f2b3ec26e22, $this->ve32585eb1b56e8e02465722681ae17f4122f4b7d); $id960ddd9e843150fe4875c48e896395edac7ca1d9ec854a302fbdb72d043506b55d5bf395184517b = new SmsModel($this->getDb(), SmsModel::TYPE_MARKETING, SmsModel::SMS_CTYPE_CUSTOMER, SmsModel::SMS_BULK_DTEXT); if($this->v6c08bf61f437a7df1241311fb1b61cb26dfddd64) { $id960ddd9e843150fe4875c48e896395edac7ca1d9ec854a302fbdb72d043506b55d5bf395184517b->unicode(); } if($this->vb60aacf907e26fcd4e5091fb981d81cb096eec61) { $id960ddd9e843150fe4875c48e896395edac7ca1d9ec854a302fbdb72d043506b55d5bf395184517b->unique(); } if($this->v09c290fe517fd15652b5755e9d3cd559511cc2b0) { $this->getTimezoneSettings(); $id960ddd9e843150fe4875c48e896395edac7ca1d4f14cfb4b41c3b4b67307d1b1cd9e51447fe428c = new DateTime($this->vd5dcee56d6ff5b91e8c1fb08d5fcf7300b3d459e); $id960ddd9e843150fe4875c48e896395edac7ca1d4f14cfb4b41c3b4b67307d1b1cd9e51447fe428c->setTimezone(new DateTimeZone($this->timezone)); $id960ddd9e843150fe4875c48e896395edac7ca1d4f14cfb4b41c3b4b67307d1b1cd9e51447fe428c->modify($this->v107a4aaa4ac26b49ac98503da261695f838538b6 . " hour"); $id960ddd9e843150fe4875c48e896395edac7ca1d9ec854a302fbdb72d043506b55d5bf395184517b->sendLater($id960ddd9e843150fe4875c48e896395edac7ca1d4f14cfb4b41c3b4b67307d1b1cd9e51447fe428c); } $id960ddd9e843150fe4875c48e896395edac7ca1d9ec854a302fbdb72d043506b55d5bf395184517b->number($id960ddd9e843150fe4875c48e896395edac7ca1df9d70e6263a5374064533b7bc8485f2b3ec26e22)->text($this->ve32585eb1b56e8e02465722681ae17f4122f4b7d)->send(); if($id960ddd9e843150fe4875c48e896395edac7ca1d9ec854a302fbdb72d043506b55d5bf395184517b->isError()) { $this->_errors = array_unique($id960ddd9e843150fe4875c48e896395edac7ca1d9ec854a302fbdb72d043506b55d5bf395184517b->getErrors()); return self::POST_ERROR; } else { $this->marketingFilter->clearFilter(); $this->_okMsg = array_unique($id960ddd9e843150fe4875c48e896395edac7ca1d9ec854a302fbdb72d043506b55d5bf395184517b->getConfirm()); return self::POST_OK; } } elseif(isset($if7ac7ffb0e11bffa95681698138e923b4fd51990["saveFilter"])) { $this->vb6f774529990c621c8a975bde1323be12d8d4de5 = $this->escapePostVariables("saveName"); $this->Execute("INSERT INTO `" . DB_PREFIX . "sp_marketing_filter` (`name`, `filter`, `disabled`, `disabled_counter`, `date`) VALUES ('" . $this->escape($this->vb6f774529990c621c8a975bde1323be12d8d4de5) . "', '" . $this->escape(SmsFilter::returnAllFilter(null, $this)) . "', '" . $this->escape(serialize(self::getSession($this, "disableCustomer"))) . "', '" . self::getSession($this, "disableCustomerCount", 0) . "', NOW());"); $this->_okMsg[] = v_filter_been_saved; return self::POST_OK; } elseif(isset($if7ac7ffb0e11bffa95681698138e923b4fd51990["saveTemplate"])) { $this->vb6f774529990c621c8a975bde1323be12d8d4de5 = $this->escapePostVariables("saveName"); $id960ddd9e843150fe4875c48e896395edac7ca1de32585eb1b56e8e02465722681ae17f4122f4b7d = $this->escapePostVariables("saveText"); $id960ddd9e843150fe4875c48e896395edac7ca1d6c08bf61f437a7df1241311fb1b61cb26dfddd64 = $this->escapePostVariables("saveUnicode"); $id960ddd9e843150fe4875c48e896395edac7ca1db60aacf907e26fcd4e5091fb981d81cb096eec61 = $this->escapePostVariables("saveUnique"); $id960ddd9e843150fe4875c48e896395edac7ca1d6c08bf61f437a7df1241311fb1b61cb26dfddd64 = ($id960ddd9e843150fe4875c48e896395edac7ca1d6c08bf61f437a7df1241311fb1b61cb26dfddd64 == "true") ? 1 : 0; $id960ddd9e843150fe4875c48e896395edac7ca1db60aacf907e26fcd4e5091fb981d81cb096eec61 = ($id960ddd9e843150fe4875c48e896395edac7ca1db60aacf907e26fcd4e5091fb981d81cb096eec61 == "true") ? 1 : 0; $this->Execute("INSERT INTO `" . DB_PREFIX . "sp_template` (`name`, `template`, `unicode`, `unique`, `date`, `type`) VALUES ('" . $this->escape($this->vb6f774529990c621c8a975bde1323be12d8d4de5) . "', '" . $this->escape($id960ddd9e843150fe4875c48e896395edac7ca1de32585eb1b56e8e02465722681ae17f4122f4b7d) . "', '" . $this->escape($id960ddd9e843150fe4875c48e896395edac7ca1d6c08bf61f437a7df1241311fb1b61cb26dfddd64) . "', '" . $this->escape($id960ddd9e843150fe4875c48e896395edac7ca1db60aacf907e26fcd4e5091fb981d81cb096eec61) . "', NOW(), '0')"); $this->_okMsg[] = v_template_been_saved; return self::POST_OK; } return self::POST_ERROR; } private function f2c58f715d5ac474fb8b4340d92932d8be3fb3714($id960ddd9e843150fe4875c48e896395edac7ca1d93d6b6827c70c2e271f281ab7ab4063da1d687d5, $id6df7fb626ea7dcb74a3aeaed55471bda0715fc1) { for($id960ddd9e843150fe4875c48e896395edac7ca1d = 0; $id960ddd9e843150fe4875c48e896395edac7ca1d < count($id6df7fb626ea7dcb74a3aeaed55471bda0715fc1); $id960ddd9e843150fe4875c48e896395edac7ca1d++) { $id960ddd9e843150fe4875c48e896395edac7ca1d93d6b6827c70c2e271f281ab7ab4063da1d687d5 = str_replace("{" . $id960ddd9e843150fe4875c48e896395edac7ca1d . "}", $id6df7fb626ea7dcb74a3aeaed55471bda0715fc1[$id960ddd9e843150fe4875c48e896395edac7ca1d], $id960ddd9e843150fe4875c48e896395edac7ca1d93d6b6827c70c2e271f281ab7ab4063da1d687d5); } return $id960ddd9e843150fe4875c48e896395edac7ca1d93d6b6827c70c2e271f281ab7ab4063da1d687d5; } private function f660dae5a2455f29817d9e5de8d7ea8b6f6d9389e($id960ddd9e843150fe4875c48e896395edac7ca1d36eaeed602218a98e73951cb3e508768db842d3d, $id975d9bc81e0d0a6132e7621d64157654ce72c36 = "customer_id") { $id960ddd9e843150fe4875c48e896395edac7ca1df7b128c92c9b44165086acf04a4da6f7edc40bb6 = null; foreach($id960ddd9e843150fe4875c48e896395edac7ca1d36eaeed602218a98e73951cb3e508768db842d3d as $id960ddd9e843150fe4875c48e896395edac7ca1d1397f46d66d6fb545f073d555ab42fdbd2cad869) { $id960ddd9e843150fe4875c48e896395edac7ca1d6096aebeea9029f876394f12f3824fd32845d32a = array(); foreach($id960ddd9e843150fe4875c48e896395edac7ca1d1397f46d66d6fb545f073d555ab42fdbd2cad869 as $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7) { $ic4324c4544b80dfa783ca4be081d513146b855f5 = array(); $id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe = $this->Execute($id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7); if($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->num_rows) { foreach($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->rows as $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d) { $ic4324c4544b80dfa783ca4be081d513146b855f5[] = $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d[$id975d9bc81e0d0a6132e7621d64157654ce72c36]; } } $id960ddd9e843150fe4875c48e896395edac7ca1d6096aebeea9029f876394f12f3824fd32845d32a = array_unique(array_merge((array)$id960ddd9e843150fe4875c48e896395edac7ca1d6096aebeea9029f876394f12f3824fd32845d32a, (array)$ic4324c4544b80dfa783ca4be081d513146b855f5)); } if(is_array($id960ddd9e843150fe4875c48e896395edac7ca1df7b128c92c9b44165086acf04a4da6f7edc40bb6)) { $id960ddd9e843150fe4875c48e896395edac7ca1df7b128c92c9b44165086acf04a4da6f7edc40bb6 = array_intersect($id960ddd9e843150fe4875c48e896395edac7ca1df7b128c92c9b44165086acf04a4da6f7edc40bb6, $id960ddd9e843150fe4875c48e896395edac7ca1d6096aebeea9029f876394f12f3824fd32845d32a); } else { $id960ddd9e843150fe4875c48e896395edac7ca1df7b128c92c9b44165086acf04a4da6f7edc40bb6 = $id960ddd9e843150fe4875c48e896395edac7ca1d6096aebeea9029f876394f12f3824fd32845d32a; } } return $id960ddd9e843150fe4875c48e896395edac7ca1df7b128c92c9b44165086acf04a4da6f7edc40bb6; } private function f07e76fb4ae5ad397efd323d4b51b6e76456f6516($iff4d7a22830d73b83e55a907cf2b7c446e53db32) { $id960ddd9e843150fe4875c48e896395edac7ca1d72bdd993247edebc102b66947b1f809be494c37c = array(); if(isset($iff4d7a22830d73b83e55a907cf2b7c446e53db32->data) && is_array($iff4d7a22830d73b83e55a907cf2b7c446e53db32->data)) { foreach($iff4d7a22830d73b83e55a907cf2b7c446e53db32->data as $id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695 => $id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69) { $id960ddd9e843150fe4875c48e896395edac7ca1da7bb895f099bbbe8d3c7ae364f009b0cfea5805c = $id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69->getValues(); foreach($id960ddd9e843150fe4875c48e896395edac7ca1da7bb895f099bbbe8d3c7ae364f009b0cfea5805c as $id960ddd9e843150fe4875c48e896395edac7ca1d) { if(is_array($this->marketingFilter->definition[$id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695]->sql)) { foreach($this->marketingFilter->definition[$id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695]->sql as $idd4b52e0a213da3ae08764e52b31adbf44ca6af9 => $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7) { if(!is_array($id960ddd9e843150fe4875c48e896395edac7ca1d)) { $id960ddd9e843150fe4875c48e896395edac7ca1d = array($id960ddd9e843150fe4875c48e896395edac7ca1d); } eval($this->f2c58f715d5ac474fb8b4340d92932d8be3fb3714($idd4b52e0a213da3ae08764e52b31adbf44ca6af9, $id960ddd9e843150fe4875c48e896395edac7ca1d)); if(isset($eval) && $eval) { foreach($id960ddd9e843150fe4875c48e896395edac7ca1d as $id960ddd9e843150fe4875c48e896395edac7ca1d7484e53f20d5dd1f7b5d8406fc2caa9b48f108ee => $id960ddd9e843150fe4875c48e896395edac7ca1d96d461834688e728b7089d6508d252cfa28e9214) { $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7 = str_replace("{" . $id960ddd9e843150fe4875c48e896395edac7ca1d7484e53f20d5dd1f7b5d8406fc2caa9b48f108ee . "}", $id960ddd9e843150fe4875c48e896395edac7ca1d96d461834688e728b7089d6508d252cfa28e9214, $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7); } $id960ddd9e843150fe4875c48e896395edac7ca1d72bdd993247edebc102b66947b1f809be494c37c[$id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695][] = $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7; } } } else { if(is_array($id960ddd9e843150fe4875c48e896395edac7ca1d)) { $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7 = $this->marketingFilter->definition[$id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695]->sql; foreach($id960ddd9e843150fe4875c48e896395edac7ca1d as $id960ddd9e843150fe4875c48e896395edac7ca1d7484e53f20d5dd1f7b5d8406fc2caa9b48f108ee => $id960ddd9e843150fe4875c48e896395edac7ca1d96d461834688e728b7089d6508d252cfa28e9214) { $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7 = str_replace("{" . $id960ddd9e843150fe4875c48e896395edac7ca1d7484e53f20d5dd1f7b5d8406fc2caa9b48f108ee . "}", $id960ddd9e843150fe4875c48e896395edac7ca1d96d461834688e728b7089d6508d252cfa28e9214, $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7); } $id960ddd9e843150fe4875c48e896395edac7ca1d72bdd993247edebc102b66947b1f809be494c37c[$id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695][] = $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7; } else { $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7 = $this->marketingFilter->definition[$id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695]->sql; $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7 = str_replace("{0}", $id960ddd9e843150fe4875c48e896395edac7ca1d, $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7); $id960ddd9e843150fe4875c48e896395edac7ca1d72bdd993247edebc102b66947b1f809be494c37c[$id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695][] = $id960ddd9e843150fe4875c48e896395edac7ca1dfe90ec3ee83cd90f9098beed08a011650ddba7e7; } } } } } return $id960ddd9e843150fe4875c48e896395edac7ca1d72bdd993247edebc102b66947b1f809be494c37c; } private function ff1d5bbecbb186cea83f5f59177713da3c0b6fdd5() { $ib1199182837e705aae8d93f525c88b1184f9395d = array(); $iefa4c7b7e08431daa83b1765e5363ae0d6341701 = $i1e07524a5f7d809e59fb1f8e06980c63cb599b8a = " "; $iff4d7a22830d73b83e55a907cf2b7c446e53db32 = self::getSession($this, "filter"); $id960ddd9e843150fe4875c48e896395edac7ca1d72bdd993247edebc102b66947b1f809be494c37c = $this->f07e76fb4ae5ad397efd323d4b51b6e76456f6516($iff4d7a22830d73b83e55a907cf2b7c446e53db32); if(isset($iff4d7a22830d73b83e55a907cf2b7c446e53db32->data) && count($iff4d7a22830d73b83e55a907cf2b7c446e53db32->data)) { $i1e07524a5f7d809e59fb1f8e06980c63cb599b8a = " AND 1=2"; } $ic4324c4544b80dfa783ca4be081d513146b855f5 = $this->f660dae5a2455f29817d9e5de8d7ea8b6f6d9389e($id960ddd9e843150fe4875c48e896395edac7ca1d72bdd993247edebc102b66947b1f809be494c37c); $i18dcc63da3ecbf28f24f7946dd50ca7330263409 = count($ic4324c4544b80dfa783ca4be081d513146b855f5); if($i18dcc63da3ecbf28f24f7946dd50ca7330263409) { $i1e07524a5f7d809e59fb1f8e06980c63cb599b8a = $this->getMarketingFilteredSQL($ic4324c4544b80dfa783ca4be081d513146b855f5); } $i305b86d048336a48f93e43d42ec9ee42de8d4974 = self::getSession($this, "disableCustomer", array()); if(count($i305b86d048336a48f93e43d42ec9ee42de8d4974) && is_array($i305b86d048336a48f93e43d42ec9ee42de8d4974) && count($i305b86d048336a48f93e43d42ec9ee42de8d4974) > 0) { $iee89255f959f4474301355c283c3e9a6c2316167 = array(); foreach($i305b86d048336a48f93e43d42ec9ee42de8d4974 as $id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69) { foreach($id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69 as $id960ddd9e843150fe4875c48e896395edac7ca1dcae1003a7b78317ecd106d559490d2ed7842f019) { $iee89255f959f4474301355c283c3e9a6c2316167[] = $id960ddd9e843150fe4875c48e896395edac7ca1dcae1003a7b78317ecd106d559490d2ed7842f019["customer_id"]; } } $iefa4c7b7e08431daa83b1765e5363ae0d6341701 = $this->getMarketingDisabledSQL($iee89255f959f4474301355c283c3e9a6c2316167); } $id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe = $this->Execute($this->getMarketingCustomerSQL($i1e07524a5f7d809e59fb1f8e06980c63cb599b8a, $iefa4c7b7e08431daa83b1765e5363ae0d6341701)); $this->vef17e27247517454a75465a52fbd4658dd7ef33f = $id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->num_rows; if($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->num_rows) { foreach($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->rows as $id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695 => $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d) { $ib1199182837e705aae8d93f525c88b1184f9395d[mb_substr(strtolower(trim($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["lastname"])), 0, 1, "UTF-8")][] = $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d; } } return $ib1199182837e705aae8d93f525c88b1184f9395d; } private function f9786bea23184d77afb22376874f78b5e81992b7d($i0a33756367a54dbfdf163cb57903aa6f7eec73c0, $id960ddd9e843150fe4875c48e896395edac7ca1de32585eb1b56e8e02465722681ae17f4122f4b7d = "") { $ib1199182837e705aae8d93f525c88b1184f9395d = $this->getStore(false); foreach($ib1199182837e705aae8d93f525c88b1184f9395d as $id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695 => $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d) { $id960ddd9e843150fe4875c48e896395edac7ca1dcae1003a7b78317ecd106d559490d2ed7842f019f0feb50adf373c822f952dbf828d39459fabee4[$id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695] = $this->getShopVariables($id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695); } if(count($i0a33756367a54dbfdf163cb57903aa6f7eec73c0) > 0) { foreach($i0a33756367a54dbfdf163cb57903aa6f7eec73c0 as $i3ac9be8ee46d310ddd11712c7831185e65650871) { foreach($i3ac9be8ee46d310ddd11712c7831185e65650871 as $id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69) { $id960ddd9e843150fe4875c48e896395edac7ca1d47bd36e501096c29cb6f8b15c692cf663348650a = $this->applyTemplate($id960ddd9e843150fe4875c48e896395edac7ca1dcae1003a7b78317ecd106d559490d2ed7842f019f0feb50adf373c822f952dbf828d39459fabee4[$id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69["store_id"]], $id960ddd9e843150fe4875c48e896395edac7ca1de32585eb1b56e8e02465722681ae17f4122f4b7d, self::$MarketingTemplateShop); $id960ddd9e843150fe4875c48e896395edac7ca1d47bd36e501096c29cb6f8b15c692cf663348650a = $this->applyTemplate($id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69, $id960ddd9e843150fe4875c48e896395edac7ca1d47bd36e501096c29cb6f8b15c692cf663348650a, self::$MarketingTemplateCustomers); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee[] = array( SmsModel::NUMBER_MOBILE => $id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69["telephone"], SmsModel::NUMBER_CUSTOMER => $id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69["customer_id"], SmsModel::NUMBER_ADMIN => 0, SmsModel::NUMBER_COUNTRY => $id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69["country_id"], SmsModel::NUMBER_CITY => $id960ddd9e843150fe4875c48e896395edac7ca1d2c0ef3bef9410f3bf64e2871a1e4a7bb4dbc7f69["city"], SmsModel::NUMBER_TEXT => $id960ddd9e843150fe4875c48e896395edac7ca1d47bd36e501096c29cb6f8b15c692cf663348650a ); } } } else { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee = array(); } return $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee; } private function fe54c016d0b5b394178312b2e18407a6677222897($i0a33756367a54dbfdf163cb57903aa6f7eec73c0 = array(), $i04c483ed13ba86058a3f85cd091a3a8ccce16145 = null, $id960ddd9e843150fe4875c48e896395edac7ca1d2187da20bd8e61829fd2ecb42fe9a117b60dc12a = true) { ksort($i0a33756367a54dbfdf163cb57903aa6f7eec73c0); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee = ""; if(defined("SMS_CLOSE_SYMBOL")) { $id960ddd9e843150fe4875c48e896395edac7ca1d3a4e4a581e6eb512a29a89e5579c91af2599272c = SMS_CLOSE_SYMBOL; } else { $id960ddd9e843150fe4875c48e896395edac7ca1d3a4e4a581e6eb512a29a89e5579c91af2599272c = "×"; } if(count($i0a33756367a54dbfdf163cb57903aa6f7eec73c0) > 0) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "<table class=\"resultTable\">"; foreach($i0a33756367a54dbfdf163cb57903aa6f7eec73c0 as $id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695 => $ic4324c4544b80dfa783ca4be081d513146b855f5) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "<tr " . self::isEven($id960ddd9e843150fe4875c48e896395edac7ca1d0018d0cb00e9a7ab65cdbd7f1c6b001b1e0222a6, "even") . ">"; $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "<td class=\"w20 center\"><span class=\"bigLetter\">" . mb_strtoupper($id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695, "UTF-8") . "</span></td><td>"; $i35d0bf7a77a6df945bffd9eb93f1166d26c8231f = 1; $id303b5caeb537d01be12f3f5a9c00252fe76e8a6 = false; foreach($ic4324c4544b80dfa783ca4be081d513146b855f5 as $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d) { if($id960ddd9e843150fe4875c48e896395edac7ca1d2187da20bd8e61829fd2ecb42fe9a117b60dc12a && $i35d0bf7a77a6df945bffd9eb93f1166d26c8231f == MAX_ON_ROW + 1) { $id303b5caeb537d01be12f3f5a9c00252fe76e8a6 = true; break; } else { if(!isset($i04c483ed13ba86058a3f85cd091a3a8ccce16145) && isset($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["store_id"])) { if(isset(self::$colors[$id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["store_id"]%9])) { $i1a2365847ce60d339758c6f7e468efebc92baf5a = self::$colors[$id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["store_id"]%9]; } } else { $i1a2365847ce60d339758c6f7e468efebc92baf5a = $i04c483ed13ba86058a3f85cd091a3a8ccce16145; } $id960ddd9e843150fe4875c48e896395edac7ca1d048387b9538950953cbba97d01199e913b5eefd4 = $this->smsLinkCustomer($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d['customer_id']); $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= ' <span class="badge" ' . ((isset($i1a2365847ce60d339758c6f7e468efebc92baf5a)) ? 'style="background-color: ' . $i1a2365847ce60d339758c6f7e468efebc92baf5a . '"' : '') . '><a href="' . $id960ddd9e843150fe4875c48e896395edac7ca1d048387b9538950953cbba97d01199e913b5eefd4 . '">' . $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d['lastname'] . ' ' . $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d['firstname'] . '</a><a class="delete ajax" href="' .$this->smsLinkRemoveCustomerList($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d['customer_id'], $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d['firstname'], $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d['lastname']). '">'.$id960ddd9e843150fe4875c48e896395edac7ca1d3a4e4a581e6eb512a29a89e5579c91af2599272c.'</a></span>'; $i35d0bf7a77a6df945bffd9eb93f1166d26c8231f++; } } if($id960ddd9e843150fe4875c48e896395edac7ca1d2187da20bd8e61829fd2ecb42fe9a117b60dc12a && $id303b5caeb537d01be12f3f5a9c00252fe76e8a6) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .=' <span class="badge"><a class="ajax" href="' . $this->smsLinkMarketingMore($id960ddd9e843150fe4875c48e896395edac7ca1d8a31cdb91ad25bea0cf23b0dd384a4bd00af6695) . '" onclick="showPopup();">' . v_filter_more . '</a></span>'; } $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "</td></tr>"; } $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "</table>"; } else { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "<strong>" . v_smsmarketing_customersfound . " 0</strong>"; } if(defined("SMS_CLOSE_SYMBOL")) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee = preg_replace('/[\x00-\x1F\x80-\xFF]/', '', $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee); } return $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee; } private function f4a4987eafe5675dfad72cd463c38035aabb708b5($ib1199182837e705aae8d93f525c88b1184f9395d, $id960ddd9e843150fe4875c48e896395edac7ca1d24559340659e3654ee9c4f36d94523f268e83b49) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee = ""; if(count($ib1199182837e705aae8d93f525c88b1184f9395d)) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "<table class=\"resultTable\">"; foreach($ib1199182837e705aae8d93f525c88b1184f9395d as $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "<tr " . self::isEven($id960ddd9e843150fe4875c48e896395edac7ca1d0018d0cb00e9a7ab65cdbd7f1c6b001b1e0222a6, "even") . ">" . "<td>" . $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["lastname"] . " " . $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["firstname"] . "</td>" . "<td class=\"right\">" . number_format($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["telephone"], 0, ".", " ") . "</td>" . '<td class="center w20"><a class="delete ajax" href="' . $_SERVER["REQUEST_URI"] . '&ajaxAction=deleteCustomer&customer=' . htmlspecialchars($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d['customer_id']) . '&firstname=' . htmlspecialchars($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d['firstname']) . '&lastname=' . htmlspecialchars($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d['lastname']) . '&letter=' . htmlspecialchars($id960ddd9e843150fe4875c48e896395edac7ca1d24559340659e3654ee9c4f36d94523f268e83b49) . '"><img src="' . self::$adminDelete . '"/></a></td>' . "</tr>"; } $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "</table>"; } else { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "<strong>" . v_smsmarketing_customersfound . " 0</strong>"; } return $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee; } private function f77bd7f78f7f71eb1e1816b1fa79cb6da75def35a($icb7fcb74b99e905291c6f7841239a9f67a80ca23 = true) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee = ""; if($icb7fcb74b99e905291c6f7841239a9f67a80ca23) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= ' <form name="saveFilter" action="" method="post" class="ajax hoverForm"> <table> <tr> <td>' . v_filter_name . ': ' . self::getInput(array("name" => "saveName", "type" => "text")) . ' ' . self::getInput(array("name" => "saveFilter", "type" => "submit", "value" => v_filter_save, "onclick" => "showPopup();")) . ' </td> </tr> </table> </form> </br> <h2>' . v_filter_load . '</h2> '; } $id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe = $this->Execute("SELECT * FROM `" . DB_PREFIX . "sp_marketing_filter` ORDER BY date DESC"); if($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->num_rows) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "<table class=\"resultTable\"> <thead> <tr> <th>" . v_filter_name . "</th> <th>" . v_filter_date . "</th> <th></th> </tr> </thead> <tbody> "; foreach($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->rows as $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= " <tr " . self::isEven($id960ddd9e843150fe4875c48e896395edac7ca1d0018d0cb00e9a7ab65cdbd7f1c6b001b1e0222a6, "even") . "> <td><a href=\"" . $this->smsLinkRestoreFilter($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["id"]) . "\" class=\"ajax\" onclick=\"showPopup();\">" . $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["name"] . "</a></td> <td class=\"w150\">" . $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["date"] . "</td> <td class=\"w20\"><a href=\"" . $this->smsLinkDeleteFilter($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["id"]) . "\" class=\"ajax\" data-confirm=\"" . v_filter_q_delete . "\"><img src=\"" . self::$adminDelete . "\" /></a></td> </tr>"; } $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "</tbody></table>"; } else { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= self::getNote(v_filter_not_found); } return $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee; } private function f48f200fa72d1635ad27c2880942a5195aa5f3cb1($icb7fcb74b99e905291c6f7841239a9f67a80ca23 = true) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee = ""; if($icb7fcb74b99e905291c6f7841239a9f67a80ca23) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= ' <form name="saveFilter" action="" method="post" class="ajax hoverForm"> <table> <tr> <td>' . v_template_name . ': ' . self::getInput(array("name" => "saveName", "type" => "text")) . ' ' . self::getInput(array("name" => "saveText", "id" => "smsSaveTemplate", "type" => "hidden")) . ' ' . self::getInput(array("name" => "saveUnicode", "id" => "smsSaveTemplateUnicode", "type" => "hidden")) . ' ' . self::getInput(array("name" => "saveUnique", "id" => "smsSaveTemplateUnique", "type" => "hidden")) . ' ' . self::getInput(array("name" => "saveTemplate", "type" => "submit", "value" => v_template_save, "onclick" => "showPopup();")) . ' <script type="text/javascript"> jQuery("#smsSaveTemplate").val(jQuery("#smsText").val()); jQuery("#smsSaveTemplateUnicode").val(jQuery("#unicode").is(":checked")); jQuery("#smsSaveTemplateUnique").val(jQuery("#unique").is(":checked")); </script> </td> </tr> </table> </form> </br> <h2>' . v_template_load . '</h2> '; } $id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe = $this->Execute("SELECT * FROM `" . DB_PREFIX . "sp_template` WHERE type = 0 ORDER BY date DESC"); if($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->num_rows) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "<table class=\"resultTable\"> <thead> <tr> <th>" . v_template_name . "</th> <th>" . v_filter_date . "</th> <th></th> </tr> </thead> <tbody> "; foreach($id960ddd9e843150fe4875c48e896395edac7ca1d83d1339527a9dc91b02fa99420eb13b0cd47adfe->rows as $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d) { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= " <tr " . self::isEven($id960ddd9e843150fe4875c48e896395edac7ca1d0018d0cb00e9a7ab65cdbd7f1c6b001b1e0222a6, "even") . "> <td><a href=\"" . $this->smsLinkRestoreMarketingTemplate($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["id"]). "\" class=\"ajax\" onclick=\"showPopup();\">" . $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["name"] . "</a></td> <td class=\"w150\">" . $id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["date"] . "</td> <td class=\"w20\"><a href=\"" . $this->smsLinkDeleteMarketingTemplate($id960ddd9e843150fe4875c48e896395edac7ca1d2e93e61d67c274d891066238c74ba6322d527b6d["id"])."\" class=\"ajax\" data-confirm=\"" . v_template_q_delete . "\"><img src=\"" . self::$adminDelete . "\" /></a></td> </tr>"; } $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= "</tbody></table>"; } else { $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee .= self::getNote(v_template_not_found); } return $id960ddd9e843150fe4875c48e896395edac7ca1d02fcabda2448d40bdb76bd10f9e95950039649ee; } } 