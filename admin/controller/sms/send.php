<?php define("SMS_CONTROLER_URL", DIR_APPLICATION . 'model/sms/'); require_once (defined("SMS_CONTROLER_URL")?SMS_CONTROLER_URL:"") .'smsController.php'; class ControllerSmsSend extends SmsController { public $text = ""; public $unicode = false; public $unique = true; public $timezone = array(); public $sendlater = false; public $recipients = ""; public $coupon = -1; public $laterDate; public $saveName = ""; public $datereal = 0; public $store = 0; public function index() { $this->setAjaxPostAction("smsCounter();"); parent::index(); } public function ajaxSaveTemplate() { $this->disableScrollUp(); $this->sendSnippet("popuphead", v_template_save); $this->sendSnippet("popupcontent", $this->f48f200fa72d1635ad27c2880942a5195aa5f3cb1()); } public function ajaxLoadTemplate() { $this->disableScrollUp(); $this->sendSnippet("popuphead", v_template_load); $this->sendSnippet("popupcontent", $this->f48f200fa72d1635ad27c2880942a5195aa5f3cb1(false)); } public function ajaxDeleteSaveTemplate($ib1199182837e705aae8d93f525c88b1184f9395d) { $this->disableScrollUp(); $this->Execute("DELETE FROM `" . DB_PREFIX . "sp_template` WHERE `id` = '" . $this->escape($ib1199182837e705aae8d93f525c88b1184f9395d["template"]) . "'"); $this->sendSnippet("popupcontent", $this->f48f200fa72d1635ad27c2880942a5195aa5f3cb1(false)); } public function ajaxRestoreTemplate($ib1199182837e705aae8d93f525c88b1184f9395d) { $i83d1339527a9dc91b02fa99420eb13b0cd47adfe = $this->Execute("SELECT * FROM `" . DB_PREFIX . "sp_template` WHERE `id` = '" . $this->escape($ib1199182837e705aae8d93f525c88b1184f9395d["template"]) . "'"); if($i83d1339527a9dc91b02fa99420eb13b0cd47adfe->num_rows) { $this->sendSnippet("textarea", self::getTextArea(array("name" => "text", "onchange" => "smsCounter()", "onkeyup" => "smsCounter()", "rows" => 12, "cols" => 60, "class" => "left", "id" => "smsText"), $i83d1339527a9dc91b02fa99420eb13b0cd47adfe->row["template"])); $this->sendSnippet("unicode", self::getInput(array("type" => "checkbox", "onchange" => "smsCounter()", "id" => "unicode", "name" => "unicode", "value" => 1), $i83d1339527a9dc91b02fa99420eb13b0cd47adfe->row["unicode"]) . ' ' . v_smsmarketing_unicode . ' ' . self::getHint(v_smsmarketing_unicodetext)); $this->sendSnippet("unique", self::getInput(array("type" => "checkbox", "id" => "unique", "name" => "unique", "value" => 1), $i83d1339527a9dc91b02fa99420eb13b0cd47adfe->row["unique"]) . ' ' . v_remove_duplicate); $this->_okMsg[] = v_template_been_apply; } } public function ajaxAddressBook($ib1199182837e705aae8d93f525c88b1184f9395d) { $this->disableScrollUp(); $this->sendSnippet("popuphead", "<img src=\"" . self::$adminEmployeesImg . "\"> " . v_sendsms_addrecipients); $this->sendSnippet("popupcontent", $this->f300a186295d9066a5809d4f9372183e5d818b7b0($ib1199182837e705aae8d93f525c88b1184f9395d["letter"])); } public function display() { $i02fcabda2448d40bdb76bd10f9e95950039649ee = parent::display(); $ie8bf65cd40f70005ebeae2be139a406353b7a989 = $this->getCoupons(); if(function_exists ("filter_input")) { $ia95f417022e395feb48959137203c276c5c4b322 = filter_input(INPUT_GET, "recipient", FILTER_SANITIZE_STRING); $i5a4616ba4ac4a7f21e69ba2afe5e994ae9927078 = filter_input(INPUT_GET, "country", FILTER_SANITIZE_STRING); } else { $ia95f417022e395feb48959137203c276c5c4b322 = $_GET["recipient"]; $i5a4616ba4ac4a7f21e69ba2afe5e994ae9927078 = $_GET["country"]; } if(($this->recipients == "") && ($ia95f417022e395feb48959137203c276c5c4b322 != null && $i5a4616ba4ac4a7f21e69ba2afe5e994ae9927078 != null)) { $i9ec854a302fbdb72d043506b55d5bf395184517b = new SmsModel($this->getDb()); $this->recipients = $i9ec854a302fbdb72d043506b55d5bf395184517b->number($ia95f417022e395feb48959137203c276c5c4b322, 0, 0, $i5a4616ba4ac4a7f21e69ba2afe5e994ae9927078)->getNumber() . ", "; } elseif(($this->recipients == "") && ($ia95f417022e395feb48959137203c276c5c4b322 != null)) { $this->recipients = $ia95f417022e395feb48959137203c276c5c4b322 . ", "; } $i02fcabda2448d40bdb76bd10f9e95950039649ee .= ' <script type="text/javascript"> var v_smsmarketing_longtext = "' . v_smsmarketing_longtext . '"; var v_smsmarketing_jstotalcustomers = "' . v_smsmarketing_jstotalcustomers . '"; var v_smsmarketing_jstotalsms = "' . v_smsmarketing_jstotalsms . '"; var v_smsmarketing_jschars = "' . v_smsmarketing_jschars . '"; var v_smsanswers_sms = "' . v_smsanswers_sms . '"; </script> '; $i02fcabda2448d40bdb76bd10f9e95950039649ee .= '<h2>' . v_sendsms_sendsms . '</h2> <p>' . v_sendsms_sendtext . '</p>'; $i107a4aaa4ac26b49ac98503da261695f838538b6 = $this->getTimezoneSettings(); $i02fcabda2448d40bdb76bd10f9e95950039649ee .= $this->getTemplateRepalce(); $i1548a96b3354c4b6d80c8278133fdb971c700757 = new DateTime($this->laterDate); $i1548a96b3354c4b6d80c8278133fdb971c700757->setTimezone(new DateTimeZone($this->timezone));  $i02fcabda2448d40bdb76bd10f9e95950039649ee .= "<script type=\"text/javascript\" src=\"" . DIR_SMS_JS . "sms.js\"></script>"; $i02fcabda2448d40bdb76bd10f9e95950039649ee .= '<script type="text/javascript" src="' . DIR_SMS_JS . 'jquery.at.caret.min.js"></script>'; $i02fcabda2448d40bdb76bd10f9e95950039649ee .= ' <form name="formSMS" action="" method="post" enctype="multipart/form-data"> <fieldset> ' . Html::legend(Html::img(array("src" => self::$transImg)) . " " . v_sendsms_bulksms . "<span class=\"right\"><a href=\"" .$this->smsLinkSaveTemplate(). "\" class=\"ajax\" onclick=\"showPopup();\">[" . v_template_save . "]</a> <a href=\"" .$this->smsLinkSavedTemplate(). "\" class=\"ajax\" onclick=\"showPopup();\">[" . v_template_load . "]</a></span>") . ' <table class="formTableSend"> <tbody> <tr> <td>' . v_smsmarketing_entertext . ':</td> <td>' . v_adminsms_preview . ': <span id="labelSMS" class="note s12 right"></span></td> <td></td> </tr> <tr> <td rowspan=4 class="sendTextArea" id="snippet-textarea">' . self::getTextArea(array("name" => "text", "onchange" => "smsCounter()", "onkeyup" => "smsCounter()", "rows" => 12, "cols" => 60, "class" => "left", "id" => "smsText"), $this->text) . '</td> <td rowspan=4 class="sendTextArea">' . self::getTextArea(array("name" => "preview", "rows" => 12, "cols" => 60, "class" => "left", "id" => "smsPreview", "disabled" => "disabled")) . '</td> <td id="snippet-unicode">' . self::getInput(array("type" => "checkbox", "onchange" => "smsCounter()", "id" => "unicode", "name" => "unicode", "value" => 1), $this->unicode) . ' ' . v_smsmarketing_unicode . ' ' . self::getHint(v_smsmarketing_unicodetext) . '</td> </tr> <tr> <td id="snippet-unique">' . self::getInput(array("type" => "checkbox", "id" => "unique", "name" => "unique", "value" => 1), $this->unique) . ' ' . v_remove_duplicate . '</td> </tr> <tr> <td>' . self::getInput(array("type" => "checkbox", "id" => "sendlater", "name" => "sendlater", "value" => 1, "onclick" => "jQuery('.sendLater').toggleClass('invisibility');"), $this->sendlater) . ' ' . v_smsmarketing_sendlater . '</td> </tr> <tr> <td> <table class="sendLater ' . (($this->sendlater == 1) ? ("") : ("invisibility")) . '"> <tr> <td>' . v_smsmarketing_date . '</td> <td>' . self::getInput(array("type" => "text", "id" => "datetimepicker", "class" => "datetime", "name" => "laterdate")) . '</td> </tr> <tr> <td>' . v_smsmarketing_yourtime . '</td> <td>' . self::getSelect(array("name" => "datereal"), array(-1 => $i107a4aaa4ac26b49ac98503da261695f838538b6 . " -" . v_smsmarketing_hr, 0 => $i107a4aaa4ac26b49ac98503da261695f838538b6, 1 => $i107a4aaa4ac26b49ac98503da261695f838538b6 . " +" . v_smsmarketing_hr), $this->datereal) . '</td> </tr> <tr> <td></td> <td>(' . v_smsmarketing_timezone . '<a href="' . $this->smsLinkTimezone() . '">' . $this->timezone . '</a>)</td> </tr> </table> </td> </tr> <tr> <td colspan="2"><p>' . v_smsprestashop_notice . '</p> <p>' . $this->getStoreForm($this->store) . " " . $this->getTags(self::$MarketingTemplateShop) . '<p/> ' . $this->getCouponForm($ie8bf65cd40f70005ebeae2be139a406353b7a989, $this->coupon) . ' </td> <td class="bottom"></td> </tr> </tbody> </table> </fieldset> <fieldset> ' . Html::legend(Html::img(array("src" => self::$adminCustomerImg)) . ' ' . v_sendsms_addrecipients . ' ' . self::getHint(v_sendsms_addtext) . ' ' . v_sendsms_eg) . ' <table class="formTableSend"> <tbody> <tr> <td class="sendTextArea" rowspan="4">' . self::getTextArea(array("name" => "recipients", "id" => "recipients", "cols" => 80, "rows" => 8), $this->recipients) . '</td> <td> ' . v_sendsms_addcsv_vcard . ' ' . self::getHint(v_sendsms_csvtext) . '</td> </tr> <tr> <td class="top">' . self::getInput(array("type" => "file", "name" => "sms_file")) . '</td> </tr> <tr> <td><h3> <img src="' . self::$adminEmployeesImg . '" alt="" /> <a href="' .$this->smsLinkAddressBook(). '" class="ajax" onclick="showPopup();">' . v_sendsms_addrecipients . '</a></h3></td> </tr> <tr> <td></td> </tr> <tr> <td></td> <td class="top">' . self::getInput(array("type" => "submit", "name" => "submitSendSmsSendSMS", "value" => v_smsmarketing_send, "class" => "button", "onclick" => "return confirmSend('" . v_smsmarketing_send . "', '" . v_smsanswers_sms . "');")) . '</td> </tr> </tbody> </table> </fieldset> </form> '; if(defined("SMS_CLOSE_SYMBOL")) { $i3a4e4a581e6eb512a29a89e5579c91af2599272c = SMS_CLOSE_SYMBOL; } else { $i3a4e4a581e6eb512a29a89e5579c91af2599272c = "Ã—"; } $i02fcabda2448d40bdb76bd10f9e95950039649ee .= ' <div id="popup"> <p class="popuphead"> <span id="snippet-popuphead"></span> <span class="close right" onclick="showPopup();">'.$i3a4e4a581e6eb512a29a89e5579c91af2599272c.'</span> </p> <div class="popupcontent"> <p id="snippet-popupcontent"></p> </div> </div> <div id="popupbackground"></div> '; $i02fcabda2448d40bdb76bd10f9e95950039649ee .= self::getAjaxLoader("submitSend", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $i02fcabda2448d40bdb76bd10f9e95950039649ee .= " <script type=\"text/javascript\"> jQuery('#datetimepicker').datetimepicker({ lang:'" . lang_iso_code . "', value:'" . $i1548a96b3354c4b6d80c8278133fdb971c700757->format("Y-m-d H:i") . "' }); smsCounter(); toggleCouponVariables(); </script> "; return $i02fcabda2448d40bdb76bd10f9e95950039649ee; } public function postProcess($if7ac7ffb0e11bffa95681698138e923b4fd51990 = NULL, $i120dfeb2f4db76e8e52ed01ad8e678e2b9fa3bb9 = NULL, $i4df8c509b6936a0640c1594ca9b38a0a55a9562f = NULL) { if($if7ac7ffb0e11bffa95681698138e923b4fd51990 == NULL && $i120dfeb2f4db76e8e52ed01ad8e678e2b9fa3bb9 == NULL) { return self::POST_ERROR; } if(isset($if7ac7ffb0e11bffa95681698138e923b4fd51990['submitSendSmsSendSMS'])) { $this->unicode = $this->escapePostVariables("unicode"); $this->unique = $this->escapePostVariables("unique"); $this->sendlater = $this->escapePostVariables("sendlater"); $this->laterDate = $this->escapePostVariables("laterdate"); $this->text = $this->escapePostVariables("text"); $this->datereal = $this->escapePostVariables("datereal"); $this->coupon = $this->escapePostVariables("coupon"); $this->recipients = $this->escapePostVariables("recipients"); $this->store = $this->escapePostVariables("store"); $this->text = $this->applyTemplate($this->getShopVariables($this->store), $this->text, self::$MarketingTemplateShop); if($this->coupon != -1) { $this->text = $this->applyTemplate($this->getCouponData($this->coupon), $this->text, self::$MarketingTemplateCoupons); } $i9ec854a302fbdb72d043506b55d5bf395184517b = new SmsModel($this->getDb(), SmsModel::TYPE_SIMPLE, SmsModel::SMS_CTYPE_CUSTOMER, SmsModel::SMS_BULK); if($_FILES['sms_file']["error"] == UPLOAD_ERR_OK) { $iccb6cdd13fb53ab60ca9fe89a47714157318d361 = array('application/vnd.ms-excel', 'text/plain', 'text/csv', 'text/tsv'); if(in_array($_FILES['sms_file']['type'], $iccb6cdd13fb53ab60ca9fe89a47714157318d361)) { $ib1199182837e705aae8d93f525c88b1184f9395d = file_get_contents($_FILES['sms_file']['tmp_name']); if(strlen($ib1199182837e705aae8d93f525c88b1184f9395d) > 0) { $ibc2fa36dbd6b936f71d62a75d147345bab9fb1e8 = explode("\n", $ib1199182837e705aae8d93f525c88b1184f9395d); foreach($ibc2fa36dbd6b936f71d62a75d147345bab9fb1e8 as $i2e93e61d67c274d891066238c74ba6322d527b6d) { $i140d151c23a5be7843ee9bffd3275f9364d99f4f = explode(";", $i2e93e61d67c274d891066238c74ba6322d527b6d); if(strlen($i140d151c23a5be7843ee9bffd3275f9364d99f4f[0]) > 0) { $i9744d24cf13e8257399c74b1ede6a0f99ec6045b[] = $i140d151c23a5be7843ee9bffd3275f9364d99f4f[0]; } } } else { $ie69b823b64e72c132a115b89028b8d475b6f861d = FOpen($_FILES['sms_file']['tmp_name'], "r"); if($ie69b823b64e72c132a115b89028b8d475b6f861d != null) { while($ib1199182837e705aae8d93f525c88b1184f9395d = FGets($ie69b823b64e72c132a115b89028b8d475b6f861d, 5000)) { $id7218f29714ac595e34d4456a75ad078cbb02291 = explode(";", $ib1199182837e705aae8d93f525c88b1184f9395d); if(strlen($i140d151c23a5be7843ee9bffd3275f9364d99f4f[0]) > 0) { $i9744d24cf13e8257399c74b1ede6a0f99ec6045b[] = $id7218f29714ac595e34d4456a75ad078cbb02291[0]; } } } } } elseif($_FILES['sms_file']['type'] == "text/x-vcard" || $_FILES['sms_file']['type'] == "text/vcard") { $i9744d24cf13e8257399c74b1ede6a0f99ec6045b = preg_replace("/TEL;.*:/", "", preg_grep("/TEL;/", explode("\n", file_get_contents($_FILES['sms_file']['tmp_name'] )))); } else { $this->_errors[] = v_sendsms_csvtext; return self::POST_ERROR; } $i9ec854a302fbdb72d043506b55d5bf395184517b->number($i9744d24cf13e8257399c74b1ede6a0f99ec6045b); } if($this->unicode) { $i9ec854a302fbdb72d043506b55d5bf395184517b->unicode(); } if($this->unique) { $i9ec854a302fbdb72d043506b55d5bf395184517b->unique(); } if($this->sendlater) { $this->getTimezoneSettings(); $i4f14cfb4b41c3b4b67307d1b1cd9e51447fe428c = new DateTime($this->laterDate); $i4f14cfb4b41c3b4b67307d1b1cd9e51447fe428c->setTimezone(new DateTimeZone($this->timezone)); $i4f14cfb4b41c3b4b67307d1b1cd9e51447fe428c->modify($this->datereal . " hour"); $i9ec854a302fbdb72d043506b55d5bf395184517b->sendLater($i4f14cfb4b41c3b4b67307d1b1cd9e51447fe428c); } $i9ec854a302fbdb72d043506b55d5bf395184517b->number($this->recipients)->text($this->text)->send(); if($i9ec854a302fbdb72d043506b55d5bf395184517b->isError()) { $this->_errors = array_unique($i9ec854a302fbdb72d043506b55d5bf395184517b->getErrors()); return self::POST_ERROR; } else { $this->_okMsg = array_unique($i9ec854a302fbdb72d043506b55d5bf395184517b->getConfirm()); return self::POST_OK; } } elseif(isset($if7ac7ffb0e11bffa95681698138e923b4fd51990["saveTemplate"])) { $this->saveName = $this->escapePostVariables("saveName"); $ie32585eb1b56e8e02465722681ae17f4122f4b7d = $this->escapePostVariables("saveText"); $i6c08bf61f437a7df1241311fb1b61cb26dfddd64 = $this->escapePostVariables("saveUnicode"); $ib60aacf907e26fcd4e5091fb981d81cb096eec61 = $this->escapePostVariables("saveUnique"); $i6c08bf61f437a7df1241311fb1b61cb26dfddd64 = ($i6c08bf61f437a7df1241311fb1b61cb26dfddd64 == "true") ? 1 : 0; $ib60aacf907e26fcd4e5091fb981d81cb096eec61 = ($ib60aacf907e26fcd4e5091fb981d81cb096eec61 == "true") ? 1 : 0; $this->Execute("INSERT INTO `" . DB_PREFIX . "sp_template` (`name`, `template`, `unicode`, `unique`, `date`, `type`) VALUES ('" . $this->escape($this->saveName) . "', '" . $this->escape($ie32585eb1b56e8e02465722681ae17f4122f4b7d) . "', '" . $this->escape($i6c08bf61f437a7df1241311fb1b61cb26dfddd64) . "', '" . $this->escape($ib60aacf907e26fcd4e5091fb981d81cb096eec61) . "', NOW(), '1')"); $this->_okMsg[] = v_template_been_saved; return self::POST_OK; } return self::POST_ERROR; } private function fd6b6de8d3721e38472295e3f6dd408fa477282f6() { $i768e98d17b6244bf5a21f43b8d01a51ce602c2fb = '<h3 class="center">'; $i92e6a83b038c2453f84552d84bb9facf4850cf9b = explode(";", lang_alphabet); foreach($i92e6a83b038c2453f84552d84bb9facf4850cf9b as $i24559340659e3654ee9c4f36d94523f268e83b49) { $i768e98d17b6244bf5a21f43b8d01a51ce602c2fb .= ' <a href="'.$this->smsLinkAddressBook($i24559340659e3654ee9c4f36d94523f268e83b49).'" class="ajax">'.$i24559340659e3654ee9c4f36d94523f268e83b49.'</a>'; } $i768e98d17b6244bf5a21f43b8d01a51ce602c2fb .= "</h3>"; return $i768e98d17b6244bf5a21f43b8d01a51ce602c2fb; } private function f48f200fa72d1635ad27c2880942a5195aa5f3cb1($icb7fcb74b99e905291c6f7841239a9f67a80ca23 = true) { $i02fcabda2448d40bdb76bd10f9e95950039649ee = ""; if($icb7fcb74b99e905291c6f7841239a9f67a80ca23) { $i02fcabda2448d40bdb76bd10f9e95950039649ee .= ' <form name="saveFilter" action="" method="post" class="ajax hoverForm"> <table> <tr> <td>' . v_template_name . ': ' . self::getInput(array("name" => "saveName", "type" => "text")) . ' ' . self::getInput(array("name" => "saveText", "id" => "smsSaveTemplate", "type" => "hidden")) . ' ' . self::getInput(array("name" => "saveUnicode", "id" => "smsSaveTemplateUnicode", "type" => "hidden")) . ' ' . self::getInput(array("name" => "saveUnique", "id" => "smsSaveTemplateUnique", "type" => "hidden")) . ' ' . self::getInput(array("name" => "saveTemplate", "type" => "submit", "value" => v_template_save, "onclick" => "showPopup();")) . ' <script type="text/javascript"> jQuery("#smsSaveTemplate").val(jQuery("#smsText").val()); jQuery("#smsSaveTemplateUnicode").val(jQuery("#unicode").is(":checked")); jQuery("#smsSaveTemplateUnique").val(jQuery("#unique").is(":checked")); </script> </td> </tr> </table> </form> </br> <h2>' . v_template_load . '</h2> '; } $i83d1339527a9dc91b02fa99420eb13b0cd47adfe = $this->Execute("SELECT * FROM `" . DB_PREFIX . "sp_template` WHERE type = 1 ORDER BY date DESC"); if($i83d1339527a9dc91b02fa99420eb13b0cd47adfe->num_rows) { $i02fcabda2448d40bdb76bd10f9e95950039649ee .= "<table class=\"resultTable\"> <thead> <tr> <th>" . v_template_name . "</th> <th>" . v_filter_date . "</th> <th></th> </tr> </thead> <tbody> "; foreach($i83d1339527a9dc91b02fa99420eb13b0cd47adfe->rows as $i2e93e61d67c274d891066238c74ba6322d527b6d) { $i02fcabda2448d40bdb76bd10f9e95950039649ee .= " <tr " . self::isEven($i0018d0cb00e9a7ab65cdbd7f1c6b001b1e0222a6, "even") . "> <td><a href=\"" . $this->smsLinkRestoreTemplate($i2e93e61d67c274d891066238c74ba6322d527b6d["id"]) . "\" class=\"ajax\" onclick=\"showPopup();\">" . $i2e93e61d67c274d891066238c74ba6322d527b6d["name"] . "</a></td> <td class=\"w150\">" . $i2e93e61d67c274d891066238c74ba6322d527b6d["date"] . "</td> <td class=\"w20\"><a href=\"" . $this->smsLinkDeleteTemplate($i2e93e61d67c274d891066238c74ba6322d527b6d["id"]) . "\" class=\"ajax\" data-confirm=\"" . v_template_q_delete . "\"><img src=\"" . self::$adminDelete . "\" /></a></td> </tr>"; } $i02fcabda2448d40bdb76bd10f9e95950039649ee .= "</tbody></table>"; } else { $i02fcabda2448d40bdb76bd10f9e95950039649ee .= self::getNote(v_template_not_found); } return $i02fcabda2448d40bdb76bd10f9e95950039649ee; } private function f300a186295d9066a5809d4f9372183e5d818b7b0($i24559340659e3654ee9c4f36d94523f268e83b49 = "A") { if($i24559340659e3654ee9c4f36d94523f268e83b49 == null) { $i24559340659e3654ee9c4f36d94523f268e83b49 = "A"; } $i02fcabda2448d40bdb76bd10f9e95950039649ee = $this->fd6b6de8d3721e38472295e3f6dd408fa477282f6(); $i02fcabda2448d40bdb76bd10f9e95950039649ee .= "<div class=\"center\">" . self::getAjaxLoader("addressBook", "<img src=\"" . self::$busy . "\">") . "</div>"; $i83d1339527a9dc91b02fa99420eb13b0cd47adfe = $this->Execute($this->getAddressBook($i24559340659e3654ee9c4f36d94523f268e83b49)); if($i83d1339527a9dc91b02fa99420eb13b0cd47adfe->num_rows) { $i02fcabda2448d40bdb76bd10f9e95950039649ee .= "<table class=\"resultTable\"> <thead> <tr> <th></th> <th>" . v_smsmarketing_allcustomers . " - " . $i24559340659e3654ee9c4f36d94523f268e83b49 . "</th> <th>" . v_smsmarketing_mobilenr . "</th> </tr> </thead> <tbody> "; foreach($i83d1339527a9dc91b02fa99420eb13b0cd47adfe->rows as $i2e93e61d67c274d891066238c74ba6322d527b6d) { $if9d70e6263a5374064533b7bc8485f2b3ec26e22 = new PhoneNumber($this->getDb(), $i2e93e61d67c274d891066238c74ba6322d527b6d["telephone"], SmsModel::SMS_CTYPE_CUSTOMER, $i2e93e61d67c274d891066238c74ba6322d527b6d["customer_id"], 0, $i2e93e61d67c274d891066238c74ba6322d527b6d["country_id"], $i2e93e61d67c274d891066238c74ba6322d527b6d["city"]); $i02fcabda2448d40bdb76bd10f9e95950039649ee .= " <tr " . self::isEven($i0018d0cb00e9a7ab65cdbd7f1c6b001b1e0222a6, "even") . "> <td class=\"w20\"><img src=\"" . self::$sendImg . "\"></td> <td><span class=\"variables\" data=\"" . $if9d70e6263a5374064533b7bc8485f2b3ec26e22->mobile . "\" onclick=\"addRecipient('" . $if9d70e6263a5374064533b7bc8485f2b3ec26e22->mobile . "');\">" . $i2e93e61d67c274d891066238c74ba6322d527b6d["lastname"] . " " . $i2e93e61d67c274d891066238c74ba6322d527b6d["firstname"] . "</td> <td class=\"w150\">+" . $if9d70e6263a5374064533b7bc8485f2b3ec26e22->mobile . "</td> </tr>"; } $i02fcabda2448d40bdb76bd10f9e95950039649ee .= "</tbody></table>"; } else { $i02fcabda2448d40bdb76bd10f9e95950039649ee .= "<h3 class=\"center\"><img src=\"" . self::$denyImg . "\"> <strong>" . $i24559340659e3654ee9c4f36d94523f268e83b49 . "</strong> " . v_smsprestashop_notfound . "</h3>"; } if(defined("SMS_CLOSE_SYMBOL")) { $i02fcabda2448d40bdb76bd10f9e95950039649ee = preg_replace('/[\x00-\x1F\x80-\xFF]/', '', $i02fcabda2448d40bdb76bd10f9e95950039649ee); } return $i02fcabda2448d40bdb76bd10f9e95950039649ee; } } 